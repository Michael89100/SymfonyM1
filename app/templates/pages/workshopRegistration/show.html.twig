{% extends 'base.html.twig' %}

{% block title %}Forum des m√©tiers - Atelier
	{{ workshop.name }}
{% endblock %}

{% set remainingSeats = workshop.room.capacityMaximum - workshop.students|length %}

{% block body %}
	<div class="container mt-4">
		<div class="row">
			<div class="col">
				<h1>Atelier ‚Äù{{ workshop.name }}‚Äù</h1>
			</div>
			<div class="col">
				{% if remainingSeats <= 0 %}
					<a href="#" class="btn btn-danger btn-lg px-4 me-md-2 fw-bold">Complet üò≠</a>
				{% else %}
					<a href="{{ path('workshop-registration.index')}}" class="btn btn-success btn-lg px-4 me-md-2 fw-bold">Je m'inscrit √† cet atelier !</a>
				{% endif %}
			</div>
		</div>

		<div class="row mt-4">
			<div class="col-md-8">
				<h2>Informations</h2>
				<table class="table table-striped">
					<tbody>
						<tr>
							<th scope="row">Nom</th>
							<td>{{ workshop.name }}</td>
						</tr>
						<tr>
							<th scope="row">Description</th>
							<td>{{ workshop.description }}</td>
						</tr>
						<tr>
							<th scope="row">M√©tiers</th>
							<td>
								{% for job in workshop.jobs %}
									<span class="badge bg-success">{{ job.name }}</span>
								{% endfor %}
							</td>
						</tr>
						<tr>
							<th scope="row">Secteur</th>
							<td>
								<span class="badge bg-info">{{ workshop.sector.name }}</span>
							</td>
						</tr>
						<tr>
							<th scope="row">Nombre de places</th>
							<td>{{ workshop.room.capacityMaximum }}</td>
						</tr>
						<tr>
							<th scope="row">Places restantes</th>
							<td>
								{% if remainingSeats <= 0 %}
									<span class="badge bg-danger">Complet üò≠</span>
								{% else %}
									{{ remainingSeats }}
								{% endif %}
							</td>
						</tr>
						<tr>
							<th scope="row">Date</th>
							<td>{{ workshop.startAt|date('d/m/Y') }}</td>
						</tr>
						<tr>
							<th scope="row">Heure</th>
							<td>{{ workshop.startAt|date('H:i') }}</td>
						</tr>
						<tr>
							<th scope="row">Dur√©e</th>
							<td>{{ workshop.duration }}</td>
						</tr>
						<tr>
							<th scope="row">Lieu</th>
							<td>{{ workshop.room.name }}</td>
						</tr>
						<tr>
							<th scope="row">Intervenant</th>
							<td></td>
						</tr>
					</tbody>
				</table>
			</div>
			<div class="col-md-4">
				<h2>Participants ({{ workshop.students|length }}
					/
					{{ workshop.room.capacityMaximum }})</h2>
				<table class="table table-striped">
					<thead>
						<tr>
							<th scope="col">Nom</th>
							<th scope="col">Pr√©nom</th>
							<th scope="col">Ecole</th>
						</tr>
					</thead>
					<tbody>
						{% for student in workshop.students %}
							<tr>
								<td>{{ student.user.lastname }}</td>
								<td>{{ student.user.firstname }}</td>
								<td>{{ student.school.name }}</td>
							</tr>
						{% else %}
							<tr>
								<td class="table-warning" colspan="3">Personne n'est inscrit sur cet atelier</td>
							</tr>
						{% endfor %}
					</tbody>
				</table>
			</div>
		</div>
		<div class="row mt-4">
			<h2>Ressources</h2>
			<table class="table table-striped">
				<thead>
					<tr>
						<th scope="col">Titre</th>
						<th scope="col">Description</th>
						<th scope="col">T√©l√©charger</th>
					</tr>
				</thead>
				<tbody>
					{% for resource in workshop.resources %}
						<tr class="align-middle">
							<td>
								<div class="row">
									<div class="col-2"><img src="/img/pdf.png" alt="pdf file" width="20px"></div>
									<div class="col-10">{{ resource.name }}</div>
								</div>
							</td>
							<td>{{ resource.description }}</td>
							<td class="align-middle">
								<a class="btn btn-success" href="{{ resource.url }}" target="_blank">
									<i class="fa-solid fa-download"></i>
								</a>
							</td>
						</tr>
					{% else %}
						<tr>
							<td class="table-warning" colspan="3">Pas de resources fournies</td>
						</tr>
					{% endfor %}
				</tbody>
			</table>
		</div>
	{% endblock %}
